{"version":3,"file":"react-snowfall.js","names":["isEqual","Snowflake"],"sources":["../../react-fast-compare/index.js","../../react-snowfall/lib/utils.js","../../react-snowfall/lib/Snowflake.js","../../react-snowfall/lib/config.js","../../react-snowfall/lib/SnowfallCanvas.js","../../react-snowfall/lib/hooks.js","../../react-snowfall/lib/Snowfall.js"],"sourcesContent":["/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.3\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    // START: Modifications:\n    // Apply guards for `Object.create(null)` handling. See:\n    // - https://github.com/FormidableLabs/react-fast-compare/issues/64\n    // - https://github.com/epoberezkin/fast-deep-equal/issues/49\n    if (a.valueOf !== Object.prototype.valueOf && typeof a.valueOf === 'function' && typeof b.valueOf === 'function') return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString && typeof a.toString === 'function' && typeof b.toString === 'function') return a.toString() === b.toString();\n    // END: Modifications\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","/**\n * Enhanced random function, selects a random value between a minimum and maximum. If the values provided are both\n * integers then the number returned will be an integer, otherwise the return number will be a decimal.\n * @param min The minimum value\n * @param max The maximum value\n */\nexport function random(min, max) {\n    if (!Number.isInteger(min) || !Number.isInteger(max)) {\n        return Math.random() * (max - min) + min;\n    }\n    else {\n        return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n}\n/**\n * Linear interpolation function to gradually step towards a target value\n * @param start The current value\n * @param end The target value\n * @param normal The rate of change between 0 and 1 (0 = no change, 1 = instant)\n */\nexport function lerp(start, end, normal) {\n    return (1 - normal) * start + normal * end;\n}\n/**\n * Selects a random item from an array of inputs.\n *\n * @param items The array of items to choose from\n * @returns A random item selected from the array\n */\nexport function randomElement(items) {\n    const index = Math.floor(Math.random() * items.length);\n    return items[index];\n}\n/**\n * Gets the height and width of the provided HTML element\n * @param element The html element to measure\n */\nexport function getSize(element) {\n    if (!element)\n        return { height: 0, width: 0 };\n    return {\n        height: element.offsetHeight,\n        width: element.offsetWidth,\n    };\n}\n/**\n * Store the value of PI * 2.\n *\n * This is so we can avoid calculating this value every time we draw a circle.\n */\nexport const twoPi = Math.PI * 2;\n//# sourceMappingURL=utils.js.map","import isEqual from 'react-fast-compare';\nimport { lerp, random, randomElement, twoPi } from './utils.js';\nexport const defaultConfig = {\n    color: '#dee4fd',\n    radius: [0.5, 3.0],\n    speed: [1.0, 3.0],\n    wind: [-0.5, 2.0],\n    changeFrequency: 200,\n    rotationSpeed: [-1.0, 1.0],\n    opacity: [1, 1],\n    enable3DRotation: false,\n};\n/**\n * An individual snowflake that will update it's location every call to `update`\n * and draw itself to the canvas every call to `draw`.\n */\nclass Snowflake {\n    /**\n     * A utility function to create a collection of snowflakes\n     * @param canvas The canvas element\n     * @param amount The number of snowflakes\n     * @param config The configuration for each snowflake\n     */\n    static createSnowflakes(canvas, amount, config) {\n        if (!canvas)\n            return [];\n        const snowflakes = [];\n        for (let i = 0; i < amount; i++) {\n            snowflakes.push(new Snowflake(canvas, config));\n        }\n        return snowflakes;\n    }\n    constructor(canvas, config = {}) {\n        // Set custom config\n        this.updateConfig(config);\n        // Setting initial parameters\n        const { radius, wind, speed, rotationSpeed, opacity, enable3DRotation } = this.config;\n        this.params = {\n            x: random(0, canvas.offsetWidth),\n            y: random(-canvas.offsetHeight, 0),\n            rotation: random(0, 360),\n            radius: random(...radius),\n            speed: random(...speed),\n            wind: random(...wind),\n            rotationSpeed: random(...rotationSpeed),\n            nextSpeed: random(...speed),\n            nextWind: random(...wind),\n            nextRotationSpeed: random(...rotationSpeed),\n            opacity: random(...opacity),\n            hasNextOpacity: false,\n            // Initialize 3D rotation parameters\n            rotationX: enable3DRotation ? random(0, 360) : 0,\n            rotationY: enable3DRotation ? random(0, 360) : 0,\n            rotationSpeedX: enable3DRotation ? random(-2.0, 2.0) : 0,\n            rotationSpeedY: enable3DRotation ? random(-2.0, 2.0) : 0,\n            nextRotationSpeedX: enable3DRotation ? random(-2.0, 2.0) : 0,\n            nextRotationSpeedY: enable3DRotation ? random(-2.0, 2.0) : 0,\n        };\n        this.framesSinceLastUpdate = 0;\n    }\n    selectImage() {\n        if (this.config.images && this.config.images.length > 0) {\n            this.image = randomElement(this.config.images);\n        }\n        else {\n            this.image = undefined;\n        }\n    }\n    updateConfig(config) {\n        const previousConfig = this.config;\n        this.config = { ...defaultConfig, ...config };\n        this.config.changeFrequency = random(this.config.changeFrequency, this.config.changeFrequency * 1.5);\n        // Update the radius if the config has changed, it won't gradually update on it's own\n        if (this.params && !isEqual(this.config.radius, previousConfig === null || previousConfig === void 0 ? void 0 : previousConfig.radius)) {\n            this.params.radius = random(...this.config.radius);\n        }\n        if (!isEqual(this.config.images, previousConfig === null || previousConfig === void 0 ? void 0 : previousConfig.images)) {\n            this.selectImage();\n        }\n        if ((previousConfig === null || previousConfig === void 0 ? void 0 : previousConfig.opacity) && !isEqual(this.config.opacity, previousConfig === null || previousConfig === void 0 ? void 0 : previousConfig.opacity)) {\n            this.params.hasNextOpacity = true;\n        }\n    }\n    updateTargetParams() {\n        this.params.nextSpeed = random(...this.config.speed);\n        this.params.nextWind = random(...this.config.wind);\n        if (this.image) {\n            this.params.nextRotationSpeed = random(...this.config.rotationSpeed);\n        }\n        if (this.config.enable3DRotation) {\n            this.params.nextRotationSpeedX = random(-2.0, 2.0);\n            this.params.nextRotationSpeedY = random(-2.0, 2.0);\n        }\n    }\n    update(offsetWidth, offsetHeight, framesPassed = 1) {\n        const { x, y, rotation, rotationSpeed, nextRotationSpeed, wind, speed, nextWind, nextSpeed, radius } = this.params;\n        // Update current location, wrapping around if going off the canvas\n        this.params.x = (x + wind * framesPassed) % (offsetWidth + radius * 2);\n        if (this.params.x > offsetWidth + radius)\n            this.params.x = -radius;\n        this.params.y = (y + speed * framesPassed) % (offsetHeight + radius * 2);\n        if (this.params.y > offsetHeight + radius) {\n            if (this.params.hasNextOpacity) {\n                this.params.opacity = random(...this.config.opacity);\n                this.params.hasNextOpacity = false;\n            }\n            this.params.y = -radius;\n        }\n        // Apply rotation\n        if (this.image || this.config.enable3DRotation) {\n            this.params.rotation = (rotation + rotationSpeed) % 360;\n        }\n        // Apply 3D rotation if enabled\n        if (this.config.enable3DRotation) {\n            this.params.rotationX = (this.params.rotationX + this.params.rotationSpeedX * framesPassed) % 360;\n            this.params.rotationY = (this.params.rotationY + this.params.rotationSpeedY * framesPassed) % 360;\n        }\n        // Update the wind, speed and rotation towards the desired values\n        this.params.speed = lerp(speed, nextSpeed, 0.01);\n        this.params.wind = lerp(wind, nextWind, 0.01);\n        this.params.rotationSpeed = lerp(rotationSpeed, nextRotationSpeed, 0.01);\n        if (this.config.enable3DRotation) {\n            this.params.rotationSpeedX = lerp(this.params.rotationSpeedX, this.params.nextRotationSpeedX, 0.01);\n            this.params.rotationSpeedY = lerp(this.params.rotationSpeedY, this.params.nextRotationSpeedY, 0.01);\n        }\n        if (this.framesSinceLastUpdate++ > this.config.changeFrequency) {\n            this.updateTargetParams();\n            this.framesSinceLastUpdate = 0;\n        }\n    }\n    getImageOffscreenCanvas(image, size) {\n        var _a, _b;\n        if (image instanceof HTMLImageElement && image.loading)\n            return image;\n        let sizes = Snowflake.offscreenCanvases.get(image);\n        if (!sizes) {\n            sizes = {};\n            Snowflake.offscreenCanvases.set(image, sizes);\n        }\n        if (!(size in sizes)) {\n            const canvas = document.createElement('canvas');\n            canvas.width = size;\n            canvas.height = size;\n            (_a = canvas.getContext('2d')) === null || _a === void 0 ? void 0 : _a.drawImage(image, 0, 0, size, size);\n            sizes[size] = canvas;\n        }\n        return (_b = sizes[size]) !== null && _b !== void 0 ? _b : image;\n    }\n    /**\n     * Applies 3D rotation transform to the canvas context.\n     * This method calculates and applies the transformation matrix for 3D rotation effects.\n     *\n     * @param ctx The canvas context to apply the transform to\n     * @param x The x position to translate to\n     * @param y The y position to translate to\n     */\n    apply3DTransform(ctx, x, y) {\n        if (this.config.enable3DRotation) {\n            const { rotationX, rotationY } = this.params;\n            const rotation = this.params.rotation || 0;\n            // Convert degrees to radians\n            const radX = (rotationX * Math.PI) / 180;\n            const radY = (rotationY * Math.PI) / 180;\n            const radZ = (rotation * Math.PI) / 180;\n            // Calculate 3D rotation matrices\n            const cosX = Math.cos(radX);\n            const sinX = Math.sin(radX);\n            const cosY = Math.cos(radY);\n            const sinY = Math.sin(radY);\n            const cosZ = Math.cos(radZ);\n            const sinZ = Math.sin(radZ);\n            // Combined rotation matrix (Z * Y * X)\n            // This creates a 3D tumbling effect\n            const a = cosZ * cosY;\n            const b = cosZ * sinY * sinX - sinZ * cosX;\n            const c = cosZ * sinY * cosX + sinZ * sinX;\n            const d = sinZ * cosY;\n            // Apply the transform\n            // The arguments for setTransform are: a, b, c, d, e, f\n            // a (scaleX), b (skewY), c (skewX), d (scaleY), e (translateX), f (translateY)\n            ctx.setTransform(a, b, c, d, x, y);\n        }\n        else {\n            // Original 2D rotation (only for images)\n            const rotation = this.params.rotation || 0;\n            const radian = (rotation * Math.PI) / 180;\n            const cos = Math.cos(radian);\n            const sin = Math.sin(radian);\n            // The arguments for setTransform are: a, b, c, d, e, f\n            // a (scaleX), b (skewY), c (skewX), d (scaleY), e (translateX), f (translateY)\n            ctx.setTransform(cos, sin, -sin, cos, x, y);\n        }\n    }\n    /**\n     * Draws a circular snowflake to the canvas.\n     *\n     * This method should only be called if our config does not have images.\n     *\n     * This method assumes that a path has already been started on the canvas.\n     * `ctx.beginPath()` should be called before calling this method.\n     *\n     * After calling this method, the fillStyle should be set to the snowflake's\n     * color and `ctx.fill()` should be called to fill the snowflake.\n     *\n     * Calling `ctx.fill()` after multiple snowflakes have had `drawCircle` called\n     * will render all of the snowflakes since the last call to `ctx.beginPath()`.\n     *\n     * @param ctx The canvas context to draw to\n     */\n    drawCircle(ctx) {\n        // If 3D rotation is enabled, we need to draw individually with transform\n        // This method is called when 3D rotation is disabled (for performance)\n        ctx.moveTo(this.params.x, this.params.y);\n        ctx.arc(this.params.x, this.params.y, this.params.radius, 0, twoPi);\n    }\n    /**\n     * Draws a circular snowflake with 3D rotation effect to the canvas.\n     *\n     * This method is used when 3D rotation is enabled and images are not being used.\n     *\n     * @param ctx The canvas context to draw to\n     * @param color The color to fill the circle with\n     */\n    drawCircle3D(ctx, color) {\n        const { x, y, radius } = this.params;\n        ctx.save();\n        // Apply 3D rotation transform\n        if (this.config.enable3DRotation) {\n            this.apply3DTransform(ctx, x, y);\n        }\n        else {\n            // No transform needed for circles without 3D rotation\n            ctx.translate(x, y);\n        }\n        // Draw the circle\n        ctx.beginPath();\n        ctx.arc(0, 0, radius, 0, twoPi);\n        ctx.fillStyle = color;\n        ctx.fill();\n        ctx.restore();\n    }\n    /**\n     * Draws an image-based snowflake to the canvas.\n     *\n     * This method should only be called if our config has images.\n     *\n     * @param ctx The canvas context to draw to\n     */\n    drawImage(ctx) {\n        const { x, y, radius } = this.params;\n        // Save the current state to avoid affecting other drawings\n        ctx.save();\n        // Set opacity if needed\n        if (this.params.opacity !== 1) {\n            ctx.globalAlpha = this.params.opacity;\n        }\n        // Apply 3D or 2D rotation transform\n        this.apply3DTransform(ctx, x, y);\n        // Draw the image with the center of the image at the center of the current location\n        const image = this.getImageOffscreenCanvas(this.image, radius);\n        ctx.drawImage(image, -(radius / 2), -(radius / 2), radius, radius);\n        // Restore the transform\n        ctx.restore();\n    }\n}\nSnowflake.offscreenCanvases = new WeakMap();\nexport default Snowflake;\n//# sourceMappingURL=Snowflake.js.map","export const snowfallBaseStyle = {\n    pointerEvents: 'none',\n    backgroundColor: 'transparent',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n};\n// Target of 60 frames per second\nexport const targetFrameTime = 1000 / 60;\n//# sourceMappingURL=config.js.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _SnowfallCanvas_ctx, _SnowfallCanvas_canvas;\nimport Snowflake, { defaultConfig } from './Snowflake.js';\nimport { targetFrameTime } from './config.js';\nexport class SnowfallCanvas {\n    get ctx() {\n        return __classPrivateFieldGet(this, _SnowfallCanvas_ctx, \"f\");\n    }\n    get canvas() {\n        return __classPrivateFieldGet(this, _SnowfallCanvas_canvas, \"f\");\n    }\n    set canvas(canvas) {\n        __classPrivateFieldSet(this, _SnowfallCanvas_canvas, canvas, \"f\");\n        __classPrivateFieldSet(this, _SnowfallCanvas_ctx, canvas.getContext('2d'), \"f\");\n    }\n    constructor(canvas, config) {\n        this.lastUpdate = Date.now();\n        this.snowflakes = [];\n        _SnowfallCanvas_ctx.set(this, void 0);\n        _SnowfallCanvas_canvas.set(this, void 0);\n        __classPrivateFieldSet(this, _SnowfallCanvas_canvas, canvas, \"f\");\n        __classPrivateFieldSet(this, _SnowfallCanvas_ctx, canvas.getContext('2d'), \"f\");\n        this.config = { snowflakeCount: 150, ...defaultConfig, ...config };\n        this.snowflakes = [];\n        this.snowflakes = Snowflake.createSnowflakes(canvas, config.snowflakeCount || 150, config);\n        this.play();\n    }\n    /**\n     * Updates the config used for the snowfall animation, if the number of snowflakes\n     * has changed then this will create new or remove existing snowflakes gracefully\n     * to retain the position of as many existing snowflakes as possible.\n     */\n    updateConfig(config) {\n        this.config = { ...this.config, ...config };\n        const sizeDifference = this.config.snowflakeCount - this.snowflakes.length;\n        if (sizeDifference > 0) {\n            this.snowflakes = [...this.snowflakes, ...Snowflake.createSnowflakes(this.canvas, sizeDifference, config)];\n        }\n        if (sizeDifference < 0) {\n            this.snowflakes = this.snowflakes.slice(0, this.config.snowflakeCount);\n        }\n        for (const snowflake of this.snowflakes) {\n            snowflake.updateConfig(this.config);\n        }\n    }\n    /**\n     * Updates the location of each snowflake based on the number of frames passed then\n     * clears the canvas and draws each snowflake.\n     */\n    render(framesPassed = 1) {\n        const { ctx, canvas, snowflakes } = this;\n        if (!ctx || !canvas)\n            return;\n        const { offsetWidth, offsetHeight } = canvas;\n        // Update the position of each snowflake\n        for (const snowflake of snowflakes) {\n            snowflake.update(offsetWidth, offsetHeight, framesPassed);\n        }\n        // Render the snowflakes\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.clearRect(0, 0, offsetWidth, offsetHeight);\n        // If using images, draw each image individually\n        if (this.config.images && this.config.images.length > 0) {\n            for (const snowflake of snowflakes) {\n                snowflake.drawImage(ctx);\n            }\n            return;\n        }\n        // Not using images\n        // If 3D rotation is enabled, draw each circle individually with transform\n        if (this.config.enable3DRotation) {\n            for (const snowflake of snowflakes) {\n                snowflake.drawCircle3D(ctx, this.config.color);\n            }\n        }\n        else {\n            // Draw circles in a single path for better performance\n            ctx.beginPath();\n            for (const snowflake of snowflakes) {\n                snowflake.drawCircle(ctx);\n            }\n            ctx.fillStyle = this.config.color;\n            ctx.fill();\n        }\n    }\n    /**\n     * The animation loop, will calculate the time since the last render and update\n     * the position of the snowflakes appropriately before queueing another frame.\n     */\n    loop() {\n        // Update based on time passed so that a slow frame rate won't slow down the snowflake\n        const now = Date.now();\n        const msPassed = Date.now() - this.lastUpdate;\n        this.lastUpdate = now;\n        // Frames that would have passed if running at 60 fps\n        const framesPassed = msPassed / targetFrameTime;\n        this.render(framesPassed);\n        this.animationFrame = requestAnimationFrame(() => this.loop());\n    }\n    /** Start the animation playing. */\n    play() {\n        this.loop();\n    }\n    /** Pause the animation. */\n    pause() {\n        if (this.animationFrame) {\n            cancelAnimationFrame(this.animationFrame);\n            this.animationFrame = undefined;\n        }\n    }\n}\n_SnowfallCanvas_ctx = new WeakMap(), _SnowfallCanvas_canvas = new WeakMap();\nexport default SnowfallCanvas;\n//# sourceMappingURL=SnowfallCanvas.js.map","import { useCallback, useEffect, useRef, useState, useMemo } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { snowfallBaseStyle } from './config.js';\nimport { getSize } from './utils.js';\n/**\n * Returns the height and width of a HTML element, uses the `ResizeObserver` api if available to detect changes to the\n * size. Falls back to listening for resize events on the window.\n * @param ref A ref to the HTML element to be measured\n */\nexport const useComponentSize = (ref) => {\n    const [size, setSize] = useState(getSize(ref.current));\n    const resizeHandler = useCallback(() => {\n        if (ref.current) {\n            setSize(getSize(ref.current));\n        }\n    }, [ref]);\n    useEffect(() => {\n        const { ResizeObserver } = window;\n        if (!ref.current)\n            return;\n        resizeHandler();\n        if (typeof ResizeObserver === 'function') {\n            const resizeObserver = new ResizeObserver(resizeHandler);\n            resizeObserver.observe(ref.current);\n            return () => resizeObserver.disconnect();\n        }\n        else {\n            window.addEventListener('resize', resizeHandler);\n            return () => window.removeEventListener('resize', resizeHandler);\n        }\n    }, [ref, resizeHandler]);\n    return size;\n};\n/**\n * Utility hook that merges any provided styles with the default styles\n * @param overrides The style prop passed into the component\n */\nexport const useSnowfallStyle = (overrides) => {\n    const styles = useMemo(() => ({\n        ...snowfallBaseStyle,\n        ...(overrides || {}),\n    }), [overrides]);\n    return styles;\n};\n/**\n * Same as `React.useEffect` but uses a deep comparison on the dependency array. This should only\n * be used when working with non-primitive dependencies.\n *\n * @param effect Effect callback to run\n * @param deps Effect dependencies\n */\nexport function useDeepCompareEffect(effect, deps) {\n    const ref = useRef(deps);\n    // Only update the current dependencies if they are not deep equal\n    if (!isEqual(deps, ref.current)) {\n        ref.current = deps;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return useEffect(effect, ref.current);\n}\n/**\n * Utility hook to stabilize a reference to a value, the returned value will always match the input value\n * but (unlike an inline object) will maintain [SameValueZero](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * equality until a change is made.\n *\n * @example\n *\n * const obj = useDeepMemo({ foo: 'bar', bar: 'baz' }) // <- inline object creation\n * const prevValue = usePrevious(obj) // <- value from the previous render\n * console.log(obj === prevValue) // <- always logs true until value changes\n */\nexport function useDeepMemo(value) {\n    const [state, setState] = useState(value);\n    useDeepCompareEffect(() => setState(value), [value]);\n    return state;\n}\n//# sourceMappingURL=hooks.js.map","import React, { useEffect, useRef } from 'react';\nimport { SnowfallCanvas } from './SnowfallCanvas.js';\nimport { defaultConfig } from './Snowflake.js';\nimport { useComponentSize, useDeepMemo, useSnowfallStyle } from './hooks.js';\nexport const Snowfall = ({ color = defaultConfig.color, changeFrequency = defaultConfig.changeFrequency, radius = defaultConfig.radius, speed = defaultConfig.speed, wind = defaultConfig.wind, rotationSpeed = defaultConfig.rotationSpeed, opacity = defaultConfig.opacity, snowflakeCount = 150, images, enable3DRotation = defaultConfig.enable3DRotation, style, } = {}) => {\n    const mergedStyle = useSnowfallStyle(style);\n    const canvasRef = useRef(null);\n    const canvasSize = useComponentSize(canvasRef);\n    const config = useDeepMemo({\n        color,\n        changeFrequency,\n        radius,\n        speed,\n        wind,\n        rotationSpeed,\n        images,\n        snowflakeCount,\n        opacity,\n        enable3DRotation,\n    });\n    // A reference to the config used for creating the initial instance\n    const configRef = useRef(config);\n    const snowfallCanvasRef = useRef();\n    useEffect(() => {\n        if (!snowfallCanvasRef.current && canvasRef.current) {\n            snowfallCanvasRef.current = new SnowfallCanvas(canvasRef.current, configRef.current);\n        }\n        return () => {\n            var _a;\n            (_a = snowfallCanvasRef.current) === null || _a === void 0 ? void 0 : _a.pause();\n            snowfallCanvasRef.current = undefined;\n        };\n    }, []);\n    useEffect(() => {\n        if (snowfallCanvasRef.current) {\n            snowfallCanvasRef.current.updateConfig(config);\n        }\n    }, [config]);\n    return (React.createElement(\"canvas\", { ref: canvasRef, height: canvasSize.height, width: canvasSize.width, style: mergedStyle, \"data-testid\": \"SnowfallCanvas\" }));\n};\nexport default Snowfall;\n//# sourceMappingURL=Snowfall.js.map"],"mappings":"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"}